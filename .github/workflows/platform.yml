# This workflow will build a .NET project
# For more information see: https://docs.github.com/en/actions/automating-builds-and-tests/building-and-testing-net

name: Test Platform

on:
  push:
    branches:
      - main
    paths:
      - microservices/platform/test/Platform.Test**
    
jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: checkout source code
        uses: actions/checkout@v2
      - name: Run Unit Tests
        uses: ./.github/actions/unit-test
        with:
          edge-stack-name: test

      - name: run unit tests
        uses: ./.github/actions/unit-test-docker
        with:
          path-to-docker-file: microservices/platform/test/Platform.Test/Dockerfile

      - name: post test report
        if: always()
        uses: dorny/test-reporter@v1
        with:
          name: unit tests report
          path: ./results/*.xml
          reporter: dotnet-trx

      